;/*FB_PKG_DELIM*/

__d("ArmadilloDataTraceType",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("I64")).of_string("13");g.armadilloMessageSend=a}),98);
__d("EncryptedBackupUploadFailureFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5728");b=d("FalcoLoggerInternal").create("encrypted_backup_upload_failure",a);e=b;g["default"]=e}),98);
__d("LSAppendDataTraceAddonStoredProcedure",["LSAppendDataTraceAddon","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSAppendDataTraceAddon"),e.dataTraceId,e.checkPointId,e.syncChannel,e.errorMessage,e.tags);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSDataTraceType",[],(function(a,b,c,d,e,f){a=Object.freeze({TASK:1,SYNC:2,RECEIVE_MSG:3,RICH_MEDIA_SEND:4,RICH_MEDIA_DOWNLOAD:5,TASK_CLIENT_MODE:6,ENCRYPTED_BACKUPS_FETCH_BACKUP_STATUS:69,ENCRYPTED_BACKUPS_INIT:70,ENCRYPTED_BACKUPS_ADD_DEVICE:71,ENCRYPTED_BACKUPS_UPLOAD:72,ENCRYPTED_BACKUPS_RESTORE:73,ENCRYPTED_BACKUPS_DELETE_BACKUP:75,ENCRYPTED_BACKUPS_CREATE_EXTRA_VIRTUAL_DEVICE:76,ENCRYPTED_BACKUPS_QR_ADD_DEVICE:77,ENCRYPTED_BACKUPS_SYNC_EPOCHS:78,ENCRYPTED_BACKUPS_OPEN_EPOCH:79,ENCRYPTED_BACKUPS_OPT_OUT_OF_BACKUP:80,ENCRYPTED_BACKUPS_MEDIA_BACKUP:81,ENCRYPTED_BACKUPS_MEDIA_RESTORE:82,ENCRYPTED_BACKUPS_THIRD_PARTY_ID_GENERATION:83,ENCRYPTED_BACKUPS_FETCH_BACKUPS_METADATA:86,ENCRYPTED_BACKUPS_REMOVE_VIRTUAL_DEVICE:87,ENCRYPTED_BACKUPS_QR_ADD_DEVICE_RECEIVER:88,ENCRYPTED_BACKUPS_DERIVE_AND_STORE_EPOCHS:89,ENCRYPTED_BACKUPS_GET_OPEN_EPOCH_KEYS:90,ENCRYPTED_BACKUPS_END_TO_END_THREAD_RESTORE:190,SAP_VESTA_REGISTRATION:251,SAP_VESTA_LOGIN:252,ENCRYPTED_BACKUPS_SHADOW_FETCH_BACKUP_STATUS:197,ENCRYPTED_BACKUPS_SHADOW_INIT:198,ENCRYPTED_BACKUPS_SHADOW_ADD_DEVICE:199,ENCRYPTED_BACKUPS_SHADOW_UPLOAD:200,ENCRYPTED_BACKUPS_SHADOW_RESTORE:201,ENCRYPTED_BACKUPS_SHADOW_DELETE_BACKUP:203,ENCRYPTED_BACKUPS_SHADOW_CREATE_EXTRA_VIRTUAL_DEVICE:204,ENCRYPTED_BACKUPS_SHADOW_QR_ADD_DEVICE:205,ENCRYPTED_BACKUPS_SHADOW_SYNC_EPOCHS:206,ENCRYPTED_BACKUPS_SHADOW_OPEN_EPOCH:207,ENCRYPTED_BACKUPS_SHADOW_QR_ADD_DEVICE_RECEIVER:216,ENCRYPTED_BACKUPS_ENCRYPTION_VERSIONING_UPSERT_VERSION_DATA:240,ENCRYPTED_BACKUPS_ENCRYPTION_VERSIONING_DELETE_VERSION_DATA:241,ENCRYPTED_BACKUPS_ENCRYPTION_VERSIONING_SYNC_VERSION_DATA:242,ENCRYPTED_BACKUPS_MESSAGE_INTEGRITY_CHECKER:243});f["default"]=a}),66);
__d("LSIsMobileClient",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return c[0]=!1,b.resolve(c)}a.__sproc_name__="LSEncryptedBackupsIsMobileClientStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSDeleteAndReenrollDeviceState",["LSArrayGetObjectAt","LSDeleteBackupOnClient","LSIsEncryptionVersionSecure","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] Beginning execution."),c.i64.neq(a[0],void 0)?c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[13]=new c.Map(),d[13].set("error_msg","Expected a nonempty query result"),d[13].set("code",c.i64.cast([0,3])),d[13].set("src_line","MEBClientStateUtils.php:247 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[14]=c.createArray(),d[15]=(d[14].push(d[13]),d[14]),e=[void 0,d[14]],d[7]=e[0],d[8]=e[1],e):(b=a.item,d[13]=new c.Map(),d[13].set("backup_id",b.backupId),d[13].set("device_public_key_blob",b.devicePublicKeyBlob),d[13].set("device_private_key_blob",b.devicePrivateKeyBlob),d[13].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[13].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[13].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[13].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[13].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[13].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[13].set("orf_client_state_v2_blob",void 0),d[13].set("orf_v2_authority_level",void 0),d[13].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[13].set("device_id",b.deviceId),d[13].set("backup_tenancy",b.backupTenancy),d[13].set("encryption_version",b.encryptionVersion),d[13].set("revision_version",b.revisionVersion),d[13].set("initialize_restore_result",void 0),d[13].set("device_creation_timestamp_sec",void 0),d[13].set("authority_level",b.authorityLevel),e=[d[13],void 0],d[7]=e[0],d[8]=e[1],e)})},function(e){return d[10]=new c.Map(),d[10].set("value",d[7]),d[10].set("errors",d[8]),d[11]=d[10].get("value"),d[11]!==void 0?c.sequence([function(e){return d[13]=d[11].get("backup_id"),d[14]=d[11].get("device_public_key_blob"),d[15]=d[11].get("device_private_key_blob"),d[16]=d[11].get("epoch_storage_public_key_blob"),d[17]=d[11].get("epoch_storage_private_key_blob"),d[18]=d[11].get("epoch_auth_public_key_blob"),d[19]=d[11].get("epoch_auth_private_key_blob"),d[20]=d[11].get("mailbox_root_key_blob"),d[21]=d[11].get("ocmf_client_state_blob"),d[22]=d[11].get("orf_client_state_v2_blob"),d[23]=d[11].get("orf_v2_authority_level"),d[24]=d[11].get("oblivious_validation_token_blob"),d[25]=d[11].get("device_id"),d[26]=d[11].get("backup_tenancy"),d[27]=d[11].get("encryption_version"),d[28]=d[11].get("revision_version"),d[29]=d[11].get("initialize_restore_result"),d[30]=d[11].get("device_creation_timestamp_sec"),d[31]=d[11].get("authority_level"),c.i64.neq(d[25],void 0)?c.sequence([function(a){return d[33]=void 0,c.i64.neq(d[33],void 0)?c.resolve(d[34]=d[33]):c.sequence([function(a){return d[37]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[38]=a[0],a})},function(a){return d[38]?d[47]=(d[37].push(c.i64.cast([0,0])),d[37]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[39]=a[0],a})},function(a){return d[39]?d[47]=(d[37].push(c.i64.cast([0,2])),d[37]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[40]=a[0],a})},function(a){return d[40]?d[47]=(d[37].push(c.i64.cast([0,3])),d[37]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[41]=a[0],a})},function(a){return d[41]?d[47]=(d[37].push(c.i64.cast([0,4])),d[37]):0,d[42]=c.createArray(),d[43]=c.i64.of_int32(d[37].length),c.i64.gt(d[43],c.i64.cast([0,0]))?c.loopAsync(d[43],function(a){return d[47]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[37],d[47]).then(function(a){return a=a,d[48]=a[0],d[49]=a[1],a})},function(a){return d[50]=(d[42].push(d[48]),d[42])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[47]=c.createArray(),d[48]=c.i64.of_int32(d[42].length),c.i64.gt(d[48],c.i64.cast([0,0]))?c.loopAsync(d[48],function(a){return d[50]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[42],d[50]).then(function(a){return a=a,d[51]=a[0],d[52]=a[1],a})},function(a){return d[53]=(d[47].push(c.i64.to_string(d[51])),d[47])}])}):c.resolve()},function(a){return d[49]=d[47].join(","),d[44]=d[49]}])},function(a){return d[42].some(function(a){return c.i64.eq(d[27],a)})?d[45]=d[27]:d[45]=void 0,c.i64.neq(d[45],void 0)?d[46]=d[45]:d[46]=void 0,d[34]=d[46]}])},function(e){return c.i64.neq(d[34],void 0)?d[35]=d[34]:d[35]=c.i64.cast([0,0]),c.i64.neq(d[26],void 0)?d[36]=d[26]:d[36]=c.i64.cast([0,1]),c.i64.eq(d[25],a[0])?c.sequence([function(a){return c.storedProcedure(b("LSDeleteBackupOnClient"),d[13],void 0,!1,void 0,void 0,!0)},function(b){return d[37]=c.i64.of_float(Date.now()),c.db.table(343).add({pk:void 0,deviceReenrollmentReason:a[1],reenrollmentTimestamp:d[37]})}]):c.resolve(0)},function(a){return d[32]=!0}]):c.sequence([function(a){return function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] Failed to load client state: 24"),d[34]="Failed to load client state: 24",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] ","",d[34]].join("")),d[33]=c.createArray(),void 0!==void 0?d[35]=(d[33].push(void 0),d[33]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",d[34],d[33],c.i64.cast([0,3]))},function(a){return d[32]=!1}])},function(a){return d[12]=d[32]}]):c.sequence([function(a){return d[13]=d[10].get("errors"),d[14]=d[10].get("errors"),function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] Failed to load client state: 1"),d[16]="Failed to load client state: 1",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] ","",d[16]].join("")),d[15]=c.createArray(),void 0!==void 0?d[17]=(d[15].push(void 0),d[15]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",d[16],d[15],c.i64.cast([0,3]))},function(a){return d[12]=!1}])}]):c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!0}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[13]=new c.Map(),d[13].set("error_msg","Expected a nonempty query result"),d[13].set("code",c.i64.cast([0,3])),d[13].set("src_line","MEBClientStateUtils.php:247 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[14]=c.createArray(),d[15]=(d[14].push(d[13]),d[14]),e=[void 0,d[14]],d[7]=e[0],d[8]=e[1],e):(b=a.item,d[13]=new c.Map(),d[13].set("backup_id",b.backupId),d[13].set("device_public_key_blob",b.devicePublicKeyBlob),d[13].set("device_private_key_blob",b.devicePrivateKeyBlob),d[13].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[13].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[13].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[13].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[13].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[13].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[13].set("orf_client_state_v2_blob",void 0),d[13].set("orf_v2_authority_level",void 0),d[13].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[13].set("device_id",b.deviceId),d[13].set("backup_tenancy",b.backupTenancy),d[13].set("encryption_version",b.encryptionVersion),d[13].set("revision_version",b.revisionVersion),d[13].set("initialize_restore_result",void 0),d[13].set("device_creation_timestamp_sec",void 0),d[13].set("authority_level",b.authorityLevel),e=[d[13],void 0],d[7]=e[0],d[8]=e[1],e)})},function(a){return d[10]=new c.Map(),d[10].set("value",d[7]),d[10].set("errors",d[8]),d[11]=d[10].get("value"),d[11]!==void 0?c.sequence([function(a){return d[13]=d[11].get("backup_id"),d[14]=d[11].get("device_public_key_blob"),d[15]=d[11].get("device_private_key_blob"),d[16]=d[11].get("epoch_storage_public_key_blob"),d[17]=d[11].get("epoch_storage_private_key_blob"),d[18]=d[11].get("epoch_auth_public_key_blob"),d[19]=d[11].get("epoch_auth_private_key_blob"),d[20]=d[11].get("mailbox_root_key_blob"),d[21]=d[11].get("ocmf_client_state_blob"),d[22]=d[11].get("orf_client_state_v2_blob"),d[23]=d[11].get("orf_v2_authority_level"),d[24]=d[11].get("oblivious_validation_token_blob"),d[25]=d[11].get("device_id"),d[26]=d[11].get("backup_tenancy"),d[27]=d[11].get("encryption_version"),d[28]=d[11].get("revision_version"),d[29]=d[11].get("initialize_restore_result"),d[30]=d[11].get("device_creation_timestamp_sec"),d[31]=d[11].get("authority_level"),c.i64.neq(d[25],void 0)?c.sequence([function(a){return d[33]=void 0,c.i64.neq(d[33],void 0)?c.resolve(d[34]=d[33]):c.sequence([function(a){return d[37]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[38]=a[0],a})},function(a){return d[38]?d[47]=(d[37].push(c.i64.cast([0,0])),d[37]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[39]=a[0],a})},function(a){return d[39]?d[47]=(d[37].push(c.i64.cast([0,2])),d[37]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[40]=a[0],a})},function(a){return d[40]?d[47]=(d[37].push(c.i64.cast([0,3])),d[37]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[41]=a[0],a})},function(a){return d[41]?d[47]=(d[37].push(c.i64.cast([0,4])),d[37]):0,d[42]=c.createArray(),d[43]=c.i64.of_int32(d[37].length),c.i64.gt(d[43],c.i64.cast([0,0]))?c.loopAsync(d[43],function(a){return d[47]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[37],d[47]).then(function(a){return a=a,d[48]=a[0],d[49]=a[1],a})},function(a){return d[50]=(d[42].push(d[48]),d[42])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[47]=c.createArray(),d[48]=c.i64.of_int32(d[42].length),c.i64.gt(d[48],c.i64.cast([0,0]))?c.loopAsync(d[48],function(a){return d[50]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[42],d[50]).then(function(a){return a=a,d[51]=a[0],d[52]=a[1],a})},function(a){return d[53]=(d[47].push(c.i64.to_string(d[51])),d[47])}])}):c.resolve()},function(a){return d[49]=d[47].join(","),d[44]=d[49]}])},function(a){return d[42].some(function(a){return c.i64.eq(d[27],a)})?d[45]=d[27]:d[45]=void 0,c.i64.neq(d[45],void 0)?d[46]=d[45]:d[46]=void 0,d[34]=d[46]}])},function(a){return c.i64.neq(d[34],void 0)?d[35]=d[34]:d[35]=c.i64.cast([0,0]),c.i64.neq(d[26],void 0)?d[36]=d[26]:d[36]=c.i64.cast([0,1]),d[32]=!0}]):c.resolve(d[32]=!1)},function(a){return d[12]=d[32]}]):c.resolve((d[13]=d[10].get("errors"),d[14]=d[10].get("errors"),d[12]=!1))},function(e){return d[12]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] Failure. Attempted to reset nux flags on an onboarded device"),d[14]="Failure. Attempted to reset nux flags on an onboarded device",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] ","",d[14]].join("")),d[13]=c.createArray(),void 0!==void 0?d[15]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",d[14],d[13],c.i64.cast([0,3]))):(d[13]=c.i64.of_float(Date.now()),c.db.table(343).add({pk:void 0,deviceReenrollmentReason:a[1],reenrollmentTimestamp:d[13]}))}])},function(a){return d[1]=c.i64.of_float(Date.now()),d[2]=c.i64.random(),d[4]="Finishing execution. Execution time: ",d[5]=c.i64.to_string(c.i64.sub(d[1],d[0])),d[6]=" ms",d[3]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure] ",d[3],d[4],d[3],d[5],d[3],d[6]].join("")),c.i64.eq(c.i64.mod_(d[2],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[7]=",",d[8]=c.createArray(),void 0!==void 0?d[9]=(d[8].push(void 0),d[8]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure",[d[4],d[7],d[5],d[7],d[6]].join(""),d[8],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDeleteAndReenrollDeviceStateStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","encrypted_backups_reenrollment_trigger"];e.exports=a}),null);
__d("updateAndFlushLSDataTrace",["FBLogger","I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSFactory","LSIntEnum","Promise","ReQLTable","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("requireDeferred")("LSDataTraceFlush").__setRef("updateAndFlushLSDataTrace");function a(a,e){return e==null?(j||(j=b("Promise"))).resolve():c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").CLIENT_READY_TO_FLUSH),dataTraceId:e,syncChannel:(i||(i=d("I64"))).neg_one}).then(function(){return d("ReQLTable").update(a.data_trace_meta,[e],function(a){if(a!=null)return{contextOne:a.contextOne,contextThree:a.contextThree,contextTwo:a.contextTwo,foregroundTimestampMs:a.foregroundTimestampMs,initTimestampMs:a.initTimestampMs,predefinedId:a.predefinedId,shouldFlush:!0,traceId:a.traceId,traceType:a.traceType};else throw c("FBLogger")("messenger_web").mustfixThrow('Data trace is missing, id: "%s"',e)}).then(function(){return k.load().then(function(b){return b.flush(a,e)})})})}g["default"]=a}),98);
__d("LSFlushDataTrace.nop",["MetaConfig","Promise","ReQL","updateAndFlushLSDataTrace"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f){return!c("MetaConfig")._("62")?(h||(h=b("Promise"))).resolve():d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.data_trace_meta).getKeyRange(f)).then(function(d){if(d!=null)return c("updateAndFlushLSDataTrace")(a,f);else return(h||(h=b("Promise"))).resolve()})};a.__nop_name__="LSFlushDataTrace";g["default"]=a}),98);
__d("LSIssueNewEbTaskAndGetTaskIDV2",["LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),a[0],a[1],a[2],void 0,void 0,c.i64.cast([0,0]),a[3],a[4],void 0,a[5],a[7]).then(function(a){return a=a,d[0]=a[0],a})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueNewEbTaskAndGetTaskIDV2StoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("MAWBridgeSearchMsg",["MAWCurrentUser","MAWVault","WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b=!0);var c=a,e=d("MAWCurrentUser").getID(),f=a.author,g=a.externalId,h=a.msgId,i=a.threadJid;if(i==null)return null;var j=c.content;c=c.sortOrderMs;i={chatJid:i,externalId:g,msg:{msgId:h,sender:d("WAJids").authorToUserId(f,e),ts:a.canonicalTs},sortOrderMs:c};g=j;return babelHelpers["extends"]({},i,{msg:babelHelpers["extends"]({},i.msg,{content:g!=null?d("MAWVault").isVaulted(g)?b?g:d("MAWVault").unvault(g):b?d("MAWVault").vault(g):g:void 0})})}b="message_content_search";c="non_message_content_search";g.createBridgeSearchMsg=a;g.MESSAGE_CONTENT_SEARCH=b;g.NON_MESSAGE_CONTENT_SEARCH=c}),98);
__d("MAWUpdateClientRestoreStatusOperationType",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;f.upsertClientRestoreStatus=a;f.markCompleteClientRestoreStatus=b}),66);
__d("MAWUserJidWrapper",["ExecutionEnvironment","MAWCurrentUser","MAWODSProxy","WAGlobals","WAJids","WAOdsEnums"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("WAJids").toMsgrUserJid(d("MAWCurrentUser").getID());if((h||(h=c("ExecutionEnvironment"))).isInWorker){var b=d("WAGlobals").getMyUserJid();d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_MY_USER_JID_GETTER,key:b===a?"same":"different"});return b}return a}g.getMyUserJid=a}),98);
__d("MWPMiniSearch",["minisearch","qex"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a;a=(a=c("qex")._("4480"))!=null?a:!1;a=a?{fuzzy:0,prefix:!0}:{fuzzy:.2,prefix:!0};return{fields:["content"],searchOptions:a}}function a(a){a===void 0&&(a=function(){return{}});var b;function d(){b=new(c("minisearch"))(babelHelpers["extends"]({},h(),a()))}return{getInstance:function(){b==null&&d();return b}}}g.createMiniSearchSingleton=a}),98);
__d("UInt8Array",["XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.length;if(!(b>0&&b%2===0&&/^[\da-f]+$/gi.test(a)))return;var c=[];for(var d=0,b=b/2|0;d<b;++d){var e=parseInt(a.substring(d<<1,(d<<1)+2|0),16);c.push(e)}return new Uint8Array(c)}function b(a){return d("XPlatReactCrypto").getRandomValues(new Uint8Array(a)).buffer}function c(a){a=a.filter(function(a){return a.byteLength!==0});var b=a.reduce(function(a,b){return a+b.byteLength|0},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(b,a);return a+b.byteLength|0},0);return c}g.fromHexString=a;g.getBufferWithRandomValuesFromLength=b;g.concatBytes=c}),98);/*FB_PKG_DELIM*/
__d("LSBumpThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.i64.eq(a[1],b.i64.cast([0,1]))?b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[0],lastActivityTimestampMs:a[0]})}):b.i64.eq(a[1],b.i64.cast([0,2]))?b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:a[0]})}):b.i64.eq(a[1],b.i64.cast([0,3]))?b.db.table(9).fetch([[[a[2]]]]).next().then(function(c,d){var e=c.done;c=c.value;return e?0:(d=c.item,b.i64.le(d.lastActivityTimestampMs,d.lastReadWatermarkTimestampMs)?b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[0],lastActivityTimestampMs:a[0]})}):b.forEach(b.db.table(9).fetch([[[a[2]]]]),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:a[0]})}))}):b.resolve(0)},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxBumpThreadStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSCheckAuthoritativeMessageExists",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.filter(b.db.table(12).fetch([[[a[1]]],"optimistic"]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.offlineThreadingId===a[1]&&b.i64.eq(c.authorityLevel,b.i64.cast([0,80]))}).next().then(function(a,b){b=a.done;a=a.value;return b?c[0]=!1:(a.item,c[0]=!0)})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxCheckAuthoritativeMessageExistsStoredProcedure";a.__tables__=["messages"];e.exports=a}),null);
__d("LSInsertMessage",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.i64.eq(a[2],b.i64.cast([0,20]))?b.db.table(12).add({threadKey:a[3],timestampMs:a[5],messageId:a[8],offlineThreadingId:a[9],authorityLevel:a[2],primarySortKey:a[6],senderId:a[10],isAdminMessage:a[12],sendStatus:a[15],sendStatusV2:a[16],text:a[0],subscriptErrorMessage:a[1],secondarySortKey:a[7],stickerId:a[11],messageRenderingType:a[13],isUnsent:a[17],unsentTimestampMs:a[18],mentionOffsets:a[19],mentionLengths:a[20],mentionIds:a[21],mentionTypes:a[22],replySourceId:a[23],replySourceType:a[24],replySourceTypeV2:a[25],replyStatus:a[26],replySnippet:a[27],replyMessageText:a[28],replyToUserId:a[29],replyMediaExpirationTimestampMs:a[30],replyMediaUrl:a[31],replyMediaPreviewWidth:a[33],replyMediaPreviewHeight:a[34],replyMediaUrlMimeType:a[35],replyMediaUrlFallback:a[36],replyCtaId:a[37],replyCtaTitle:a[38],replyAttachmentType:a[39],replyAttachmentId:a[40],replyAttachmentExtra:a[41],replyType:a[42],isForwarded:a[43],forwardScore:a[44],hasQuickReplies:a[45],adminMsgCtaId:a[46],adminMsgCtaTitle:a[47],adminMsgCtaType:a[48],cannotUnsendReason:a[49],textHasLinks:a[50],viewFlags:a[51],displayedContentTypes:a[52],viewedPluginKey:a[53],viewedPluginContext:a[54],quickReplyType:a[55],hotEmojiSize:a[56],platformXmdEncoded:a[57],replySourceTimestampMs:a[58],ephemeralDurationInSec:a[59],msUntilExpirationTs:a[60],ephemeralExpirationTs:a[61],takedownState:a[62],isCollapsed:a[63],subthreadKey:a[64],botResponseId:a[65],metadataDataclass:a[66],editCount:a[67],isPaidPartnership:a[68],adminSignatureName:a[69],adminSignatureProfileUrl:a[70],adminSignatureCreatorType:a[71],translatedText:a[72],textDialect:a[73],translatedTextDialect:a[74],scheduledTimestamp:a[75],isVideoQuickSend:a[76]}):b.sequence([function(d){return b.db.table(12).fetch([[[a[9]]],"optimistic"]).next().then(function(b,d){var e=b.done;b=b.value;return e?(e=[a[6],a[7],void 0],c[0]=e[0],c[1]=e[1],c[2]=e[2],e):(d=b.item,e=[d.primarySortKey,d.secondarySortKey,d.localDataId],c[0]=e[0],c[1]=e[1],c[2]=e[2],e)})},function(c){return b.forEach(b.filter(b.db.table(12).fetch([[[a[9]]],"optimistic"]),function(c){return c.offlineThreadingId===a[9]&&b.i64.lt(c.authorityLevel,a[2])}),function(a){return a["delete"]()})},function(d){return b.db.table(12).add({threadKey:a[3],timestampMs:a[5],messageId:a[8],offlineThreadingId:a[9],authorityLevel:a[2],primarySortKey:c[0],senderId:a[10],isAdminMessage:a[12],sendStatus:a[15],sendStatusV2:a[16],text:a[0],subscriptErrorMessage:a[1],secondarySortKey:c[1],stickerId:a[11],messageRenderingType:a[13],isUnsent:a[17],unsentTimestampMs:a[18],mentionOffsets:a[19],mentionLengths:a[20],mentionIds:a[21],mentionTypes:a[22],replySourceId:a[23],replySourceType:a[24],replySourceTypeV2:a[25],replyStatus:a[26],replySnippet:a[27],replyMessageText:a[28],replyToUserId:a[29],replyMediaExpirationTimestampMs:a[30],replyMediaUrl:a[31],replyMediaPreviewWidth:a[33],replyMediaPreviewHeight:a[34],replyMediaUrlMimeType:a[35],replyMediaUrlFallback:a[36],replyCtaId:a[37],replyCtaTitle:a[38],replyAttachmentType:a[39],replyAttachmentId:a[40],replyAttachmentExtra:a[41],replyType:a[42],isForwarded:a[43],forwardScore:a[44],hasQuickReplies:a[45],adminMsgCtaId:a[46],adminMsgCtaTitle:a[47],adminMsgCtaType:a[48],cannotUnsendReason:a[49],textHasLinks:a[50],viewFlags:a[51],displayedContentTypes:a[52],viewedPluginKey:a[53],viewedPluginContext:a[54],quickReplyType:a[55],hotEmojiSize:a[56],platformXmdEncoded:a[57],replySourceTimestampMs:a[58],ephemeralDurationInSec:a[59],msUntilExpirationTs:a[60],ephemeralExpirationTs:a[61],takedownState:a[62],isCollapsed:a[63],subthreadKey:a[64],botResponseId:a[65],metadataDataclass:a[66],editCount:a[67],isPaidPartnership:a[68],adminSignatureName:a[69],adminSignatureProfileUrl:a[70],adminSignatureCreatorType:a[71],translatedText:a[72],textDialect:a[73],translatedTextDialect:a[74],scheduledTimestamp:a[75],isVideoQuickSend:a[76],localDataId:c[2]})}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxInsertMessageStoredProcedure";a.__tables__=["messages"];e.exports=a}),null);
__d("LSUpdateDisappearingSettingInClientThreadsTable.nop",["I64","LSMessagingThreadAttributionType","MAWBridgeFireAndForget","MAWBridgeSendAndReceive","MAWCurrentUser","MAWEphemeralMsgAutoResetSystemId","MAWJids","MAWMessageSendReporter","MAWMessageSendReporterV2","MAWMiActOnActThreadReady","ReQL","WATimeUtils","promiseDone","qpl","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;a=async function(a,b,e){var f=await d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(e));if(f!=null)return d("MAWMiActOnActThreadReady").onActThreadReady(a,e,"LSUpdateDisappearingSettingInClientThreadsTable.nop",function(a,b){var e={ephemeralExpirationInSec:(h||(h=d("I64"))).to_int32((a=f.disappearingSettingTtl)!=null?a:(h||(h=d("I64"))).zero),ephemeralLastUpdatedOrSetTimestamp:d("WATimeUtils").castMilliSecondsToUnixTime(h.to_float((a=f.disappearingSettingUpdatedTs)!=null?a:(h||(h=d("I64"))).zero))};d("MAWBridgeFireAndForget").fireAndForget("backend","setEphemeralSettingCache",{jid:b,settings:e});if(f.disappearingSettingUpdatedBy!=null){a=(h||(h=d("I64"))).to_string(f.disappearingSettingUpdatedBy);var g=a===c("MAWEphemeralMsgAutoResetSystemId");if(a===d("MAWCurrentUser").getID()||g){var i=function(a){return d("MAWBridgeSendAndReceive").sendAndReceive("backend","setEphemeralSettingsFromFrontend",{chatJid:b,ephemeralExpirationInSec:e.ephemeralExpirationInSec,ephemeralLastUpdatedOrSetTimestamp:e.ephemeralLastUpdatedOrSetTimestamp,isEphemeralSettingReset:g,s2sInstanceKey:a})};if(d("MAWMessageSendReporterV2").isMessageSendReporterV2Enabled())c("promiseDone")(d("MAWMessageSendReporterV2").MAWMessageSendReporterV2({composerEntrypoint:"LSUpdateDisappearingSetting",lsSource:"unknown",messageTypeParamsArgs:{isEphemeralSetting:!0},thread:f},function(a){return i(a).then(function(a){return[a]})}));else{var j=d("sendToSentQPLLogger").markSendToSentStartWithAnnotation(f,{isEphemeralSetting:!0},c("LSMessagingThreadAttributionType").UNKNOWN);c("promiseDone")(d("MAWMessageSendReporter").MAWMessageSendReporter(null,i(j),{qplEventType:c("qpl")._(25313175,"1551"),qplInstanceKey:j}))}}else d("MAWBridgeFireAndForget").fireAndForget("backend","setEphemeralSettingsFromMI",{author:d("MAWJids").toUserJid(a),chatJid:b,ephemeralExpirationInSec:e.ephemeralExpirationInSec,ephemeralLastUpdatedOrSetTimestamp:e.ephemeralLastUpdatedOrSetTimestamp,fromWAI:!1,isEphemeralSettingReset:!1,serverTs:e.ephemeralLastUpdatedOrSetTimestamp})}return Promise.resolve()})};a.__nop_name__="LSInsertAdminMessageInClientMessages";g.default=a}),98);
__d("LSUpdateParticipantLastMessageSendTimestamp",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.resolve(c)}a.__sproc_name__="LSMailboxUpdateParticipantLastMessageSendTimestampStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSUpdateThreadActivityStatus",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(e){return d[2]=new c.Map(),d[2].set("thread_fbid",a[0]),d[2].set("force_upsert",!1),d[2].set("use_open_messenger_transport",!1),d[2].set("sync_group",c.i64.cast([0,104])),d[2].set("metadata_only",!1),d[2].set("preview_only",!1),d[3]=d[2].get("thread_fbid"),d[4]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[3]),c.i64.cast([0,209]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(e){return d[5]=c.createArray(),d[8]=(d[5].push(a[0]),d[5]),d[6]=new c.Map(),d[6].set("number_of_threads",c.i64.cast([0,1])),d[6].set("event_type","issue_tpq_for_verify_threads_activity_status"),d[6].set("thread_ids",d[5]),d[7]=c.toJSON(d[6]),c.storedProcedure(b("LSIssueNewTask"),"log_community_resnapshot_event",c.i64.cast([0,576]),d[7],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[0]=c.i64.cast([0,2])}]):(f=e.item,c.sequence([function(b){return c.i64.lt(f.lastActivityTimestampMs,a[1])?c.sequence([function(b){return c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({lastActivityTimestampMs:a[1],snippet:a[2]})})},function(a){return d[2]=c.i64.cast([0,1])}]):c.resolve(d[2]=c.i64.cast([0,0]))},function(a){return d[0]=d[2]}]))})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxUpdateThreadActivityStatusStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSUpdateThreadSnippet",["LSGetThreadParticipantDisplayName","LSLocalize"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.resolve((d[1]="",d[0]=d[1]===""?void 0:d[1]))},function(e){return d[0]!==void 0?c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({snippet:d[0],snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,isAdminSnippet:a[2],snippetSenderContactId:a[3],snippetHasEmoji:a[4],viewedPluginKey:a[5],viewedPluginContext:a[6]})}):a[7]?c.sequence([function(e){return c.i64.neq(a[3],void 0)?c.sequence([function(e){return c.storedProcedure(b("LSGetThreadParticipantDisplayName"),a[0],a[3]).then(function(a){return a=a,d[2]=a[0],a})},function(b){return a[1]!==void 0?(d[2]!==void 0?d[4]=[d[2],": ",a[1]].join(""):d[4]=a[1],d[3]=d[4]):d[3]=void 0,d[1]=d[3]}]):c.resolve(d[1]=a[1])},function(b){return c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({snippet:d[1],snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,isAdminSnippet:a[2],snippetSenderContactId:a[3],snippetHasEmoji:a[4],viewedPluginKey:a[5],viewedPluginContext:a[6]})})}]):c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({snippet:a[1],snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,isAdminSnippet:a[2],snippetSenderContactId:a[3],snippetHasEmoji:a[4],viewedPluginKey:a[5],viewedPluginContext:a[6]})})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxUpdateThreadSnippetStoredProcedure";a.__tables__=["threads","contacts"];e.exports=a}),null);/*FB_PKG_DELIM*/
__d("LSThreadAttributionTypeUtil",["I64","LSIntEnum","LSMessagingThreadAttributionType","LSThreadAttributionStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){b=d("LSThreadAttributionStore").getSourceWithoutReset({type:"MWLSEntrypoint",value:b},(h||(h=d("I64"))).to_string(a));return j(b)}function b(a,b){b=d("LSThreadAttributionStore").getSourceAndResetAttribution({type:"MWLSEntrypoint",value:b},(h||(h=d("I64"))).to_string(a));return j(b)}function j(a){if(a.type==="LSThreadAttribution")return a.value;a=a.value;if(a==="inboxPendingRequests")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_PENDING_REQUESTS);else if(a==="fullscreenChat")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_COMMUNITY_MESSAGING_FULLSCREEN_CHAT);else if(a==="sidebarGroupsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_GROUPS);else if(a==="jewel")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_THREAD_LIST);else if(a==="shop")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MINI_SHOP_VIEW_MENU_BUTTON);else if(a==="chatheadsOverflow")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS_OVERFLOW);else if(a==="hovercard"||a==="feedDynamicHoverCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_DYNAMIC_HOVER_CARD);else if(a==="search"||a==="messengerUniversalSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_UNIVERSAL_SEARCH);else if(a==="story"||a==="storyAggregatedUsers"||a==="storySeenByList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_STORY);else if(a==="timeline"||a==="feedOrganicPost")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST);else if(a==="pageAboutCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_ABOUT_CARD);else if(a==="inboxInThread")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_IN_THREAD);else if(a==="notificationInThreadReply")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_NOTIFICATION_IN_THREAD_REPLY);else if(a==="archieve")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_ARCHIVED_THREADS);else if(a==="storyViewerSheetRow")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_STORY_VIEWER_SHEET_ROW);else if(a==="chatheadsNewMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS_NEW_MESSAGE);else if(a==="event")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_EVENT);else if(a==="jewelSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_SEARCH);else if(a==="inboxSpam"||a==="inboxThreadList"||a==="inboxRestricted")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX);else if(a==="jewelNewMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_NEW_MESSAGE);else if(a==="pendingRequests")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_PENDING_REQUESTS_INBOX_THREAD_LIST);else if(a==="sidebarSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_SEARCH);else if(a==="inboxRemainingThreads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_REMAINING_THREADS);else if(a==="pagesHeader")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_PROFILE_HEADER_MESSAGE_BUTTON);else if(a==="inboxRecentThreads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_RECENT_THREADS);else if(a==="chatheads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS);else if(a==="pageResponsivenessCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_RESPONSIVENESS_CONTEXT_CARD);else if(a==="inboxSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_MESSAGE_SEARCH);else if(a==="jewelNestedFolder")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_NESTED_FOLDER);else if(a==="marketplace")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MARKETPLACE_SEND_MESSAGE);else if(a==="feedOrganicPostViewAndMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE);else if(a==="adsCta")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA);else if(a==="chatInThread")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_CHAT_IN_THREAD);else if(a==="payments")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").PAYMENTS);else if(a==="inboxFolder")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_NESTED_FOLDER);else if(a==="inboxArchived")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_ARCHIVED_THREADS);else if(a==="inboxActiveContacts")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_ACTIVE_CONTACTS);else if(a==="sidebarContactsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_LIST);else if(a==="sidebarCommunityChatsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_COMMUNITY_CHATS);else if(a==="igdChatTabsThreadView")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").IGD_WEB_CHAT_TAB_IN_THREAD);else if(a==="inboxTrayActiveNow")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MONTAGE_AND_ACTIVE_NOW_ACTIVE_NOW);else if(a==="communityFriendsDialog")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_COMMUNITY_MESSAGING_COMMUNITY_FRIENDS_DIALOG);else if(a==="pagesHomeFriendsDialog")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_PAGES_HOME_FRIENDS_DIALOG);else if(a==="mutualFriendsDialog")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PROFILE_MUTUAL_FRIENDS_DIALOG);else if(a==="birthday")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_BIRTHDAY_CENTER);else if(a==="groupMembers")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_GROUPS_MEMBER_LIST);else if(a==="fundraiserSupportersList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FUNDRAISER_SUPPORTERS_LIST);else if(a==="memories")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MEMORIES);else if(a==="feedPoll")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_FEED_POLL);else if(a==="reactorList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_REACTORS_LIST_MESSAGE_BUTTON);else if(a==="friendsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FRIENDS_HOME);else if(a==="pagesPrivateReply")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_PAGES_PRIVATE_REPLY);else return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").UNKNOWN)}g.getSourceWithoutReset=a;g.getSourceAndResetAttribution=b}),98);
__d("MaybeUpdateTargetBasedOnODCutoverOrDefaultE2EEDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";a=c("requireDeferred")("MaybeUpdateTargetBasedOnODCutoverOrDefaultE2EE").__setRef("MaybeUpdateTargetBasedOnODCutoverOrDefaultE2EEDeferred");g["default"]=a}),98);
__d("getVendorPrefixedName",["invariant","ExecutionEnvironment","UserAgent","camelize"],(function(a,b,c,d,e,f,g,h){var i,j={},k=["Webkit","ms","Moz","O"],l=new RegExp("^("+k.join("|")+")"),m=(i||(i=c("ExecutionEnvironment"))).canUseDOM?document.createElement("div").style:{};function n(a){for(var b=0;b<k.length;b++){var c=k[b]+a;if(c in m)return c}return null}function o(a){switch(a){case"lineClamp":return c("UserAgent").isEngine_DEPRECATED_DANGEROUS("WebKit >= 315.14.2")||c("UserAgent").isEngine("Blink")?"WebkitLineClamp":null;default:return null}}function a(a){var b=c("camelize")(a);if(j[b]===void 0){var d=b.charAt(0).toUpperCase()+b.slice(1);l.test(d)&&h(0,957,a);(i||(i=c("ExecutionEnvironment"))).canUseDOM?j[b]=b in m?b:n(d):j[b]=o(b)}return j[b]}g["default"]=a}),98);
__d("useLSMessagingSource",["IGDWebUtils","MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),b=d("IGDWebUtils").isOnInstagramWeb();switch(a){case"Inbox":return"inboxInThread";case"FullscreenChat":return"fullscreenChat";case"ChatTab":return b?"igdChatTabsThreadView":"chatInThread";default:return"unknown"}}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("LSInsertAdminMessageInClientMessages.nop",["FBLogger","I64","MAWBridgeFireAndForget","MAWEphemeralMsgAutoResetSystemId","MAWExternalId","MAWJids","MAWMiActOnActThreadReady","MAWMpsGating","WAStanzaUtils","WATimeUtils","base64Binary","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;a=async function(a,b,e,f,g,k,l,m,n){d("MAWMpsGating").isMpsEnabled()&&(m!=null&&n!=null?await d("MAWMiActOnActThreadReady").onActThreadReady(a,e,"LSInsertAdminMessageInClientMessages_"+g,function(a,b){d("MAWBridgeFireAndForget").fireAndForget("mps","mpsHandleLsAdminMessage",{actorFbid:(h||(h=d("I64"))).to_string(f),chatJid:b,externalId:m,protobuf:d("base64Binary").decode(n).buffer,timestampMs:h.to_float(k)});return Promise.resolve()}):c("FBLogger")("mps").warn("admin message %s cannot be processed",g));if(d("MAWMpsGating").isFullMpsEnabled())return Promise.resolve();var o=m!=null?d("WAStanzaUtils").toStanzaId(m):d("MAWExternalId").generateExternalId();if(g==="change_thread_theme"){var p=l.has("theme_emoji")?i(l.get("theme_emoji")):void 0,q=l.has("theme_name_with_subtitle")?i(l.get("theme_name_with_subtitle")):void 0;if(q==null){c("FBLogger")("messenger_web").mustfix("invalid themeNameWithSubtitle when writing admin message for thread theme customization");return Promise.resolve()}var r=l.has("theme_type")?i(l.get("theme_type")):void 0;r==null&&c("FBLogger")("messenger_web").warn("invalid themeType when writing admin message for thread theme customization");return d("MAWMiActOnActThreadReady").onActThreadReady(a,e,"LSInsertAdminMessageInClientMessages_"+g,function(a,b){d("MAWBridgeFireAndForget").fireAndForget("backend","writeAdminMessageForThreadThemeCustomization",{actorFbid:(h||(h=d("I64"))).to_string(f),chatJid:b,externalId:o,serverAuthoritativeTimestampMs:d("WATimeUtils").castToMillisTime(h.to_float(k)),themeEmoji:p,themeNameWithSubtitle:q,themeType:r});return Promise.resolve()})}else if(g==="change_thread_image")return d("MAWMiActOnActThreadReady").onActThreadReady(a,e,"LSInsertAdminMessageInClientMessages_"+g,function(a,b){d("MAWBridgeFireAndForget").fireAndForget("backend","writeAdminMessageForThreadPhotoCustomization",{actorFbid:(h||(h=d("I64"))).to_string(f),chatJid:b,externalId:o,serverAuthoritativeTimestampMs:d("WATimeUtils").castToMillisTime(h.to_float(k))});return Promise.resolve()});else if(g==="link_cta"){var s=l.has("initiator_user_id")?i(l.get("initiator_user_id")):void 0;if(s==null){c("FBLogger")("messenger_web").mustfix("UK OSA Link CTA should have valid initiator user id with the message.");return Promise.resolve()}return d("MAWMiActOnActThreadReady").onActThreadReady(a,e,"LSInsertAdminMessageInClientMessages_"+g,function(a,b){c("gkx")("9653")&&d("MAWBridgeFireAndForget").fireAndForget("backend","writeAdminMessageForUKOSA",{actorFbid:s,chatJid:b,externalId:o,serverAuthoritativeTimestampMs:d("WATimeUtils").castToMillisTime((h||(h=d("I64"))).to_float(k))});return Promise.resolve()})}else if(g==="pin_messages_v2")return d("MAWMiActOnActThreadReady").onActThreadReady(a,e,"LSInsertAdminMessageInClientMessages_"+g,function(a,b){d("MAWBridgeFireAndForget").fireAndForget("backend","writeAdminMessageForPinMessage",{actorFbid:(h||(h=d("I64"))).to_string(f),chatJid:b,externalId:o,serverAuthoritativeTimestampMs:d("WATimeUtils").castToMillisTime(h.to_float(k))});return Promise.resolve()});else if(g==="unpin_messages_v2")return d("MAWMiActOnActThreadReady").onActThreadReady(a,e,"LSInsertAdminMessageInClientMessages_"+g,function(a,b){d("MAWBridgeFireAndForget").fireAndForget("backend","writeAdminMessageForUnpinMessage",{actorFbid:(h||(h=d("I64"))).to_string(f),chatJid:b,externalId:o,serverAuthoritativeTimestampMs:d("WATimeUtils").castToMillisTime(h.to_float(k))});return Promise.resolve()});else if(g==="change_thread_icon"){var t=l.has("thread_icon")?i(l.get("thread_icon")):void 0;if(t==null){c("FBLogger")("messenger_web").mustfix("invalid thread_icon when writing admin message for thread hotlike customization");return Promise.resolve()}return d("MAWMiActOnActThreadReady").onActThreadReady(a,e,"LSInsertAdminMessageInClientMessages_"+g,function(a,b){d("MAWBridgeFireAndForget").fireAndForget("backend","writeAdminMessageForThreadHotlikeCustomization",{actorFbid:(h||(h=d("I64"))).to_string(f),chatJid:b,externalId:o,serverAuthoritativeTimestampMs:d("WATimeUtils").castToMillisTime(h.to_float(k)),threadIcon:t.length===0?"\ud83d\udc4d":t});return Promise.resolve()})}else if(g==="change_thread_quick_reaction"){var u=l.has("thread_quick_reaction_emoji")?i(l.get("thread_quick_reaction_emoji")):void 0;if(u==null){c("FBLogger")("messenger_web").mustfix("invalid reaction when writing admin message for thread quick reaction customization");return Promise.resolve()}return d("MAWMiActOnActThreadReady").onActThreadReady(a,e,"LSInsertAdminMessageInClientMessages_"+g,function(a,b){d("MAWBridgeFireAndForget").fireAndForget("backend","writeAdminMessageForThreadHotlikeCustomization",{actorFbid:(h||(h=d("I64"))).to_string(f),chatJid:b,externalId:o,serverAuthoritativeTimestampMs:d("WATimeUtils").castToMillisTime(h.to_float(k)),threadIcon:u.length===0?"\ud83d\udc4d":u});return Promise.resolve()})}else if(g==="change_thread_nickname"){var v=l.has("participant_id")?i(l.get("participant_id")):void 0,w=l.has("nickname")?i(l.get("nickname")):void 0;if(v==null||w==null){c("FBLogger")("messenger_web").mustfix("invalid params when writing admin message for thread nickname customization");return Promise.resolve()}return d("MAWMiActOnActThreadReady").onActThreadReady(a,e,"LSInsertAdminMessageInClientMessages_"+g,function(a,b){d("MAWBridgeFireAndForget").fireAndForget("backend","writeAdminMessageForThreadNicknameCustomization",{actorFbid:(h||(h=d("I64"))).to_string(f),chatJid:b,externalId:o,nickName:w,participantId:v,serverAuthoritativeTimestampMs:d("WATimeUtils").castToMillisTime(h.to_float(k))});return Promise.resolve()})}else if(g==="change_disappearing_setting")return d("MAWMiActOnActThreadReady").onActThreadReady(a,e,"LSInsertAdminMessageInClientMessages_"+g,function(a,b){a=l.has("disappearing_setting_time")?i(l.get("disappearing_setting_time")):void 0;var e=l.has("old_disappearing_setting_time")?i(l.get("old_disappearing_setting_time")):void 0,f=l.has("disappearing_setting_actor_fbid")?i(l.get("disappearing_setting_actor_fbid")):void 0,g=l.has("disappearing_setting_is_initial_sync")?j(l.get("disappearing_setting_is_initial_sync"))===!0:!1;a==null&&c("FBLogger")("messenger_web").mustfix("[labyrinth][web] settingsTtl missing for admin msg, isInitSync: %s",g.toString());var m=f===c("MAWEphemeralMsgAutoResetSystemId"),n=parseInt(a,10);f==null&&g&&c("FBLogger")("messenger_web").info("[labyrinth][web] author for ephemeral admin msg is null, ttl is zero: %s",(n===0).toString());if(g)return Promise.resolve();if(g||m){d("MAWBridgeFireAndForget").fireAndForget("backend","writeAdminMessageForEphemeralSettingsChange",{author:null,chatJid:b,expirationInSec:n,externalId:o,isEphemeralSettingReset:m,isInitSync:g,isTurningOnEphemeralSetting:g,serverTs:d("WATimeUtils").castToUnixTime((h||(h=d("I64"))).to_float(k)/1e3)});return Promise.resolve()}else f!=null&&a!=null?d("MAWBridgeFireAndForget").fireAndForget("backend","writeAdminMessageForEphemeralSettingsChange",{author:d("MAWJids").toUserJid(f),chatJid:b,expirationInSec:n,externalId:o,isEphemeralSettingReset:!1,isInitSync:!1,isTurningOnEphemeralSetting:e==null||e==="0",serverTs:d("WATimeUtils").castToUnixTime((h||(h=d("I64"))).to_float(k)/1e3)}):c("FBLogger")("messenger_web").mustfix("[labyrinth][web] param missing for admin msg, author: %s, settingsTtl: %s, oldSettingsTtl: %s, isInitSync: %s",(f!=null).toString(),(a!=null).toString(),(e!=null).toString(),g.toString());return Promise.resolve()});else if(g==="limit_sharing"){b=l.has("limit_sharing_type")?i(l.get("limit_sharing_type")):void 0;var x=b==="enabled";return d("MAWMiActOnActThreadReady").onActThreadReady(a,e,"LSInsertAdminMessageInClientMessages.nop",function(a,b){d("MAWBridgeFireAndForget").fireAndForget("backend","writeAdminMessageForLimitSharing",{actorFbid:(h||(h=d("I64"))).to_string(f),chatJid:b,externalId:o,isLimitSharingEnabled:x,serverAuthoritativeTimestampMs:d("WATimeUtils").castToMillisTime(h.to_float(k))});return Promise.resolve()})}return Promise.resolve()};var i=function(a){if(a==null)return void 0;if(typeof a==="string")return a;c("FBLogger")("messenger_web").mustfix("Invalid type for string, expected string, but got %s",typeof a);return void 0},j=function(a){if(typeof a==="boolean")return a;c("FBLogger")("messenger_web").mustfix("Invalid type for boolean, expected boolean, but got %s",typeof a);return void 0};a.__nop_name__="LSInsertAdminMessageInClientMessages";g.default=a}),98);
__d("LSInsertAdminMessageInClientMessages",["LSInsertAdminMessageInClientMessages.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.nativeOperation(b("LSInsertAdminMessageInClientMessages.nop"),a[0],a[1],a[2],a[3],a[4],a[5],a[6])},function(a){return c.resolve(d)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxInsertAdminMessageInClientMessagesStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSUpdateDisappearingSettingInClientThreadsTable",["LSUpdateDisappearingSettingInClientThreadsTable.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.nativeOperation(b("LSUpdateDisappearingSettingInClientThreadsTable.nop"),a[0])},function(a){return c.resolve(d)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxUpdateDisappearingSettingInClientThreadsTableStoredProcedure";a.__tables__=[];e.exports=a}),null);/*FB_PKG_DELIM*/
__d("LSIssueCheckBackupStateOnInitSyncTask",["LSArrayGetObjectAt","LSIsEncryptionVersionSecure","LSIssueNewEbTaskAndGetTaskIDV2"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(a){return c.sequence([function(a){return c.islc(c.filter(c.db.table(168).fetch(),function(a){return c.i64.eq(a.authorityLevel,c.i64.cast([0,80]))||!1}),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var e=a.done;a=a.value;return e?(d[6]=new c.Map(),d[6].set("error_msg","Expected a nonempty query result"),d[6].set("code",c.i64.cast([0,3])),d[6].set("src_line","MEBClientStateUtils.php:247 MEBClientStateUtils::maybeClientStateFromDatabaseDirectly()"),d[7]=c.createArray(),d[8]=(d[7].push(d[6]),d[7]),e=[void 0,d[7]],d[0]=e[0],d[1]=e[1],e):(b=a.item,d[6]=new c.Map(),d[6].set("backup_id",b.backupId),d[6].set("device_public_key_blob",b.devicePublicKeyBlob),d[6].set("device_private_key_blob",b.devicePrivateKeyBlob),d[6].set("epoch_storage_public_key_blob",b.epochStoragePublicKeyBlob),d[6].set("epoch_storage_private_key_blob",b.epochStoragePrivateKeyBlob),d[6].set("epoch_auth_public_key_blob",b.epochAuthPublicKeyBlob),d[6].set("epoch_auth_private_key_blob",b.epochAuthPrivateKeyBlob),d[6].set("mailbox_root_key_blob",b.mailboxRootKeyBlob),d[6].set("ocmf_client_state_blob",b.ocmfClientStateBlob),d[6].set("orf_client_state_v2_blob",void 0),d[6].set("orf_v2_authority_level",void 0),d[6].set("oblivious_validation_token_blob",b.obliviousValidationTokenBlob),d[6].set("device_id",b.deviceId),d[6].set("backup_tenancy",b.backupTenancy),d[6].set("encryption_version",b.encryptionVersion),d[6].set("revision_version",b.revisionVersion),d[6].set("initialize_restore_result",void 0),d[6].set("device_creation_timestamp_sec",void 0),d[6].set("authority_level",b.authorityLevel),e=[d[6],void 0],d[0]=e[0],d[1]=e[1],e)})},function(a){return d[3]=new c.Map(),d[3].set("value",d[0]),d[3].set("errors",d[1]),d[4]=d[3].get("value"),d[4]!==void 0?c.sequence([function(a){return d[6]=d[4].get("backup_id"),d[7]=d[4].get("device_public_key_blob"),d[8]=d[4].get("device_private_key_blob"),d[9]=d[4].get("epoch_storage_public_key_blob"),d[10]=d[4].get("epoch_storage_private_key_blob"),d[11]=d[4].get("epoch_auth_public_key_blob"),d[12]=d[4].get("epoch_auth_private_key_blob"),d[13]=d[4].get("mailbox_root_key_blob"),d[14]=d[4].get("ocmf_client_state_blob"),d[15]=d[4].get("orf_client_state_v2_blob"),d[16]=d[4].get("orf_v2_authority_level"),d[17]=d[4].get("oblivious_validation_token_blob"),d[18]=d[4].get("device_id"),d[19]=d[4].get("backup_tenancy"),d[20]=d[4].get("encryption_version"),d[21]=d[4].get("revision_version"),d[22]=d[4].get("initialize_restore_result"),d[23]=d[4].get("device_creation_timestamp_sec"),d[24]=d[4].get("authority_level"),c.i64.neq(d[18],void 0)?c.sequence([function(a){return d[26]=void 0,c.i64.neq(d[26],void 0)?c.resolve(d[27]=d[26]):c.sequence([function(a){return d[33]=c.createArray(),c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,0])).then(function(a){return a=a,d[34]=a[0],a})},function(a){return d[34]?d[43]=(d[33].push(c.i64.cast([0,0])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,2])).then(function(a){return a=a,d[35]=a[0],a})},function(a){return d[35]?d[43]=(d[33].push(c.i64.cast([0,2])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,3])).then(function(a){return a=a,d[36]=a[0],a})},function(a){return d[36]?d[43]=(d[33].push(c.i64.cast([0,3])),d[33]):0,c.storedProcedure(b("LSIsEncryptionVersionSecure"),c.i64.cast([0,4])).then(function(a){return a=a,d[37]=a[0],a})},function(a){return d[37]?d[43]=(d[33].push(c.i64.cast([0,4])),d[33]):0,d[38]=c.createArray(),d[39]=c.i64.of_int32(d[33].length),c.i64.gt(d[39],c.i64.cast([0,0]))?c.loopAsync(d[39],function(a){return d[43]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[33],d[43]).then(function(a){return a=a,d[44]=a[0],d[45]=a[1],a})},function(a){return d[46]=(d[38].push(d[44]),d[38])}])}):c.resolve()},function(a){return c.sequence([function(a){return d[43]=c.createArray(),d[44]=c.i64.of_int32(d[38].length),c.i64.gt(d[44],c.i64.cast([0,0]))?c.loopAsync(d[44],function(a){return d[46]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[38],d[46]).then(function(a){return a=a,d[47]=a[0],d[48]=a[1],a})},function(a){return d[49]=(d[43].push(c.i64.to_string(d[47])),d[43])}])}):c.resolve()},function(a){return d[45]=d[43].join(","),d[40]=d[45]}])},function(a){return d[38].some(function(a){return c.i64.eq(d[20],a)})?d[41]=d[20]:d[41]=void 0,c.i64.neq(d[41],void 0)?d[42]=d[41]:d[42]=void 0,d[27]=d[42]}])},function(a){return c.i64.neq(d[27],void 0)?d[28]=d[27]:d[28]=c.i64.cast([0,0]),c.i64.neq(d[19],void 0)?d[29]=d[19]:d[29]=c.i64.cast([0,1]),d[30]=new c.Map(),d[30].set("backup_id",d[6]),d[30].set("device_id",d[18]),d[31]=c.toJSON(d[30]),c.storedProcedure(b("LSIssueNewEbTaskAndGetTaskIDV2"),"encrypted_backups_setup",c.i64.cast([0,50054]),d[31],c.i64.cast([0,0]),c.i64.cast([0,93]),c.i64.cast([0,0]),void 0,c.i64.cast([0,0])).then(function(a){return a=a,d[32]=a[0],a})},function(a){return d[25]=!0}]):c.resolve((function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssueCheckBackupStateOnInitSyncTaskStoredProcedure] No client state in checkBackupStateOnInitSyncTask with reason: 24"),d[25]=!1))},function(a){return d[5]=d[25]}]):c.resolve((d[6]=d[3].get("errors"),d[7]=d[3].get("errors"),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsIssueCheckBackupStateOnInitSyncTaskStoredProcedure] No client state in checkBackupStateOnInitSyncTask with reason: 1"),d[5]=!1))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsIssueCheckBackupStateOnInitSyncTaskStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state"];e.exports=a}),null);
__d("LSSetHMPSStatus",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.resolve(c)}a.__sproc_name__="LSMailboxSetHMPSStatusStoredProcedure";a.__tables__=[];e.exports=a}),null);